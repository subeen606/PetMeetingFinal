<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Main">
	
	<select id="getTodayPlayboards" resultType="com.petmeeting.joy.playboard.model.PlayboardDto">
		SELECT SEQ, BOARD_CODE, EMAIL, TITLE, CONTENT, FILENAME, LOCATION, LOCATION_DETAIL, CATEGORY, 
			   PRICE, PEOPLE, PERSONCOUNT, READCOUNT, LIKECOUNT, REPORTCOUNT, PDATE, EDATE, REGDATE, DEL
		FROM (
				SELECT SEQ, BOARD_CODE, EMAIL, TITLE, CONTENT, FILENAME, LOCATION, LOCATION_DETAIL, CATEGORY, 
					   PRICE, PEOPLE, PERSONCOUNT, READCOUNT, LIKECOUNT, REPORTCOUNT, PDATE, EDATE, REGDATE, DEL, 
					   ROW_NUMBER()OVER(ORDER BY REGDATE DESC) AS RNUM
				FROM PM_PLAYBOARD
				WHERE DEL = 0 AND TO_CHAR(REGDATE,'YYYYMMDD')=TO_CHAR(SYSDATE,'YYYYMMDD')
		)
		WHERE RNUM <![CDATA[>=]]> 1 AND RNUM <![CDATA[<=]]> 6		
	</select>
	
	<select id="getTodayFreeboards" resultType="com.petmeeting.joy.freeboard.model.FreeboardDto">
		SELECT SEQ, BOARD_CODE, EMAIL, CATEGORY, TITLE, CONTENT, READCOUNT, LIKECOUNT, REPORTCOUNT, REGDATE, DEL 

		FROM (
				SELECT SEQ, BOARD_CODE, EMAIL, CATEGORY, TITLE, CONTENT, READCOUNT, LIKECOUNT, REPORTCOUNT, REGDATE, DEL,
					   ROW_NUMBER()OVER(ORDER BY REGDATE DESC) AS RNUM
				FROM PM_FREEBOARD
				WHERE DEL = 0 AND TO_CHAR(REGDATE,'YYYYMMDD')=TO_CHAR(SYSDATE,'YYYYMMDD')
		)
		WHERE RNUM <![CDATA[>=]]> 1 AND RNUM <![CDATA[<=]]> 6		
	</select>
	
	<select id="getThisMonthEvents" resultType="com.petmeeting.joy.admin.model.EventboardDto">
		SELECT SEQ, TITLE, CONTENT, FILENAME, LOCATION, LOCATION_DETAIL, EVENT_SDATE, EVENT_EDATE, REGDATE
		FROM (
			SELECT SEQ, TITLE, CONTENT, FILENAME, LOCATION, LOCATION_DETAIL, EVENT_SDATE, EVENT_EDATE, REGDATE, ROW_NUMBER()OVER(ORDER BY EVENT_SDATE ASC) AS RNUM
			FROM PM_EVENTBOARD
			WHERE TO_CHAR(EVENT_SDATE,'YYYYMMDD')<![CDATA[>=]]>TO_CHAR(SYSDATE,'YYYYMMDD')
		)
		WHERE RNUM <![CDATA[>=]]> 1 AND RNUM <![CDATA[<=]]> 5
	</select>

</mapper>